@baseUrl = http://3.106.238.34:3000
@token = eyJraWQiOiI1RTR4eVRSR0lQUVRmcnU2b2pDZVdJdHowbEEyTE9nSFNZUXB4M3N0ZUZvPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJkOTdlMjRmOC01MGQxLTcwYjQtMDU5NC1lMzQ4ZDVmMzUxMDAiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoZWFzdC0yLmFtYXpvbmF3cy5jb21cL2FwLXNvdXRoZWFzdC0yX1BKcHhlS2xZWiIsImNvZ25pdG86dXNlcm5hbWUiOiJ0ZXN0dXNlciIsIm9yaWdpbl9qdGkiOiI4NTgzMzE5MS1jZTFlLTQ3NjgtYjM5MS00OWI5ZjE4YTg2ZTIiLCJhdWQiOiI0djJyNzdqY2JjYWprb2ZnZDlwZDFkZ21uZiIsImV2ZW50X2lkIjoiNDk1Njk2NDktYWE2NC00ZjExLWI3ODctZGVkNzhkY2VlMjMzIiwidG9rZW5fdXNlIjoiaWQiLCJhdXRoX3RpbWUiOjE3NTk0OTMzNTQsImV4cCI6MTc1OTQ5Njk1NCwiaWF0IjoxNzU5NDkzMzU0LCJqdGkiOiI5ZmIyMjFmNC1hYWFhLTQzZjQtOGVkMS01ZTU3OWRjZWY0MjMiLCJlbWFpbCI6Im5hdGhkLnR1cm5lckBnbWFpbC5jb20ifQ.oHH7Rbfk6YOy0iKlo5PWshv2O3miB2s_nia_sRO5glDe60aEc0dWVaYWIJnMFg5j7uhNCiNDFkRVpMBukWpVmVG49hg2_URPXILVOQbGOR-SRxzpcdiWBLeZB3Y-kgGKjOHok0PxTuN-ExPYRuz4Wsv8caSmh8K5kBmT7GHLSAnN8KwPFylkXKqfXUwq2OjP9CTznBe4A_QLeZkWKtgcOMOulgJV19f6uYoD4doEajaj4DUts37JJ401mbMmatBBaKSy0kEE9dpPAxEFEt1tok4MA88DWreTJcKyUi4gDlCIjoXTpbnT9yaD9enDJuTf0V1V1WF8pDKw4OLQ6f0QcA

### Register New User
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
    "username": "testuser1",
    "email": "nathd.turner@gmail.com",
    "password": "TestPassword123!"
}

### Confirm Registration (use code from email)
POST {{baseUrl}}/api/auth/confirm
Content-Type: application/json

{
    "username": "testuser1",
    "code": "367315"
}

### Login with Cognito
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
    "username": "testuser1",
    "password": "TestPassword123!"
}

### ============================================
### PRE-SIGNED URL TESTS
### ============================================

### STEP 1: Get Pre-signed Upload URL
GET {{baseUrl}}/api/videos/upload-url?filename=test-video.mp4&contentType=video/mp4
Authorization: Bearer {{token}}

### STEP 2: Upload directly to S3 using the pre-signed URL from Step 1
# Copy the "uploadUrl" from the response above and paste it below
# Also save the videoId and s3Key for Step 3
PUT https://cab432-video-processor-n11676795.s3.ap-southeast-2.amazonaws.com/uploads/d97e24f8-50d1-70b4-0594-e348d5f35100/1759497369219-980695712.mp4?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIA5DYSEEJ4X2SZ2PBD%2F20251003%2Fap-southeast-2%2Fs3%2Faws4_request&X-Amz-Date=20251003T131609Z&X-Amz-Expires=300&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEKz%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaDmFwLXNvdXRoZWFzdC0yIkcwRQIhAN2zFdq1DljmW0mzS39Mp0jZOr%2Ftjma10DxOjANGgs6CAiAx8gm%2FW9JaI2HMXGJRxnt4XNqeJnF%2FEDtgkxRMhGEhBCrMBQhFEAMaDDkwMTQ0NDI4MDk1MyIMTJAx2dzUVHCzgOX2KqkF1wNsUxFD9SWaDq%2FKZvWvpSOwpzFBfbNvCu8FV62N7Ucdak5f6%2FqRtG6wsPmunkWB6%2Fcp0h9Uwm1TkQAa%2F%2BEqsK2NZ9%2BX0pmZA1Zvyv7YUGH3H9xpm%2FtzsbIewyvCEqX9tALoA%2Fnjzk6jKD4kdKIVSj%2FNiNQmoXonuv112N66WFIg8LBTGPHFUv4W9gvJB7R6Iq8MTukpT5dnZL8fNIy%2FK4ul487PLNne9YgsfaJQlBemZroNoM0AtqpnMj7%2BK95zkffqFrOxNHhDRRxOn1OJbfRvICSlBR25Yj%2BXgFN6YiLk03ZrtjYv%2FiBeAgmIDZ5G0PaKPRvxmzjP%2FgvwBHTxiORmEk4BjS8vJ4AJ4KWwWA1%2BlGndqyg%2BSaMDutMM%2F66ADqjH1HTmpD8W8AGP0Dghd3S9nTMtl9FrL%2BnFeqUrBjfMTFp8sBO2CFFSmC0Ms8UvTOS2KKpg8qWcsLdGtAjSoB8aP5IkBYVPCpR9GZ7OEWblRapvEedCecLLJ53Siz7lAaXEHTsAr92OK%2BXY3NPJ0TIzq0vyb5VX0Ov5lzAiNYKd%2FZijH0arUKURw2jspj9sK0uY1MmtyZxYF2639bLYfSOJfWC4Ksr9dUo%2BnUzo1Y2pji92HniMz90vkubn3LPcEPa9h3uRXnCOgsn02ajOSIOSdmgNP0xwdiiZhlePSmHp2vNutjq30ltEyWfL2AhOhbryI5vcqLASiPtD974h%2Fhm8VTvdUX9r%2F8LTf4WghmIR4je9IOifHI%2FH5BuEdS%2B8co2D07N06kTl45jjAruUHiw1rbfcse5pKCGqj4hedrX%2FTiHScrli31W%2Bzy81WLSaFEiYN9tKdNUMEf9DolON3v9CvcOC0uFkyHOFxyaZeGduwv%2Bkb8dnz%2BeHShIK%2FygHN33w%2BhU%2F7c9PMO79%2FsYGOrEB2YhPNWshLpu8d4DCHCggji5Z1Qxygfz4lwSwsDXTMs%2F1KmdEkHyHqIyJlUUprfozod2EYeXZCsT30iUedpfXr89NlPckWLAqrgPiK39Xh47YDjgWB9UHZx90j1I7f3gKsTbEom1UrYJttpOVt0ToJ3ytaDua5pDhle7%2B8aSxbiWHshSVILBNfl7me3WRIGKqvU1YeR39JcFgk3IsBMoVaBevrLhr6f%2BRV6CYKTEUOJnL&X-Amz-Signature=56e178b6ce6a60fb59553447fbae3dc3572161976135ed42f06af97008a67a52&X-Amz-SignedHeaders=host&x-amz-checksum-crc32=AAAAAA%3D%3D&x-amz-sdk-checksum-algorithm=CRC32&x-id=PutObject

< ./s3-test.mp4

### STEP 3: Confirm the upload (saves metadata to DynamoDB)
# Use videoId and s3Key from Step 1 response
POST {{baseUrl}}/api/videos/confirm-upload
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "videoId": "e49a7871-c119-472b-b9cc-ded8f596477f",
    "s3Key": "uploads/d97e24f8-50d1-70b4-0594-e348d5f35100/1759494740560-237776669.mp4",
    "originalName": "test-video.mp4",
    "size": 1500000,
    "mimetype": "video/mp4"
}

### STEP 4: Get Pre-signed Download URL
# Replace VIDEO_ID with actual video ID
GET {{baseUrl}}/api/videos/e49a7871-c119-472b-b9cc-ded8f596477f/download-url
Authorization: Bearer {{token}}

### STEP 5: Download directly from S3 using the pre-signed URL
# Copy the "downloadUrl" from Step 4 response
GET https://cab432-video-processor-n11676795.s3.ap-southeast-2.amazonaws.com/uploads/d97e24f8-50d1-70b4-0594-e348d5f35100/1759494740560-237776669.mp4?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIA5DYSEEJ4X2SZ2PBD%2F20251003%2Fap-southeast-2%2Fs3%2Faws4_request&X-Amz-Date=20251003T123342Z&X-Amz-Expires=300&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEKz%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaDmFwLXNvdXRoZWFzdC0yIkcwRQIhAN2zFdq1DljmW0mzS39Mp0jZOr%2Ftjma10DxOjANGgs6CAiAx8gm%2FW9JaI2HMXGJRxnt4XNqeJnF%2FEDtgkxRMhGEhBCrMBQhFEAMaDDkwMTQ0NDI4MDk1MyIMTJAx2dzUVHCzgOX2KqkF1wNsUxFD9SWaDq%2FKZvWvpSOwpzFBfbNvCu8FV62N7Ucdak5f6%2FqRtG6wsPmunkWB6%2Fcp0h9Uwm1TkQAa%2F%2BEqsK2NZ9%2BX0pmZA1Zvyv7YUGH3H9xpm%2FtzsbIewyvCEqX9tALoA%2Fnjzk6jKD4kdKIVSj%2FNiNQmoXonuv112N66WFIg8LBTGPHFUv4W9gvJB7R6Iq8MTukpT5dnZL8fNIy%2FK4ul487PLNne9YgsfaJQlBemZroNoM0AtqpnMj7%2BK95zkffqFrOxNHhDRRxOn1OJbfRvICSlBR25Yj%2BXgFN6YiLk03ZrtjYv%2FiBeAgmIDZ5G0PaKPRvxmzjP%2FgvwBHTxiORmEk4BjS8vJ4AJ4KWwWA1%2BlGndqyg%2BSaMDutMM%2F66ADqjH1HTmpD8W8AGP0Dghd3S9nTMtl9FrL%2BnFeqUrBjfMTFp8sBO2CFFSmC0Ms8UvTOS2KKpg8qWcsLdGtAjSoB8aP5IkBYVPCpR9GZ7OEWblRapvEedCecLLJ53Siz7lAaXEHTsAr92OK%2BXY3NPJ0TIzq0vyb5VX0Ov5lzAiNYKd%2FZijH0arUKURw2jspj9sK0uY1MmtyZxYF2639bLYfSOJfWC4Ksr9dUo%2BnUzo1Y2pji92HniMz90vkubn3LPcEPa9h3uRXnCOgsn02ajOSIOSdmgNP0xwdiiZhlePSmHp2vNutjq30ltEyWfL2AhOhbryI5vcqLASiPtD974h%2Fhm8VTvdUX9r%2F8LTf4WghmIR4je9IOifHI%2FH5BuEdS%2B8co2D07N06kTl45jjAruUHiw1rbfcse5pKCGqj4hedrX%2FTiHScrli31W%2Bzy81WLSaFEiYN9tKdNUMEf9DolON3v9CvcOC0uFkyHOFxyaZeGduwv%2Bkb8dnz%2BeHShIK%2FygHN33w%2BhU%2F7c9PMO79%2FsYGOrEB2YhPNWshLpu8d4DCHCggji5Z1Qxygfz4lwSwsDXTMs%2F1KmdEkHyHqIyJlUUprfozod2EYeXZCsT30iUedpfXr89NlPckWLAqrgPiK39Xh47YDjgWB9UHZx90j1I7f3gKsTbEom1UrYJttpOVt0ToJ3ytaDua5pDhle7%2B8aSxbiWHshSVILBNfl7me3WRIGKqvU1YeR39JcFgk3IsBMoVaBevrLhr6f%2BRV6CYKTEUOJnL&X-Amz-Signature=e5704724a8c69e2432f81ec73bb8ccd7aa9396face0b42f77a899103827ba6da&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject

### ============================================
### ORIGINAL UPLOAD METHOD (Still works)
### ============================================

### Upload Video to S3 (with Cognito token)
POST {{baseUrl}}/api/videos/upload
Authorization: Bearer {{token}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="video"; filename="s3-test.mp4"
Content-Type: video/mp4

< ./s3-test.mp4
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### Get All User Videos (from DynamoDB)
GET {{baseUrl}}/api/videos
Authorization: Bearer {{token}}

### Get Specific Video (replace VIDEO_ID)
GET {{baseUrl}}/api/videos/72bec0cc-8bc0-4934-9846-9c227b1ef588
Authorization: Bearer {{token}}

### Start Video Transcoding (replace VIDEO_ID)
POST {{baseUrl}}/api/process/transcode/db67314e-3126-434f-8f85-b61b116f6fc2
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "resolution": "640x480",
    "preset": "fast",
    "crf": "28",
    "videoBitrate": "500k",
    "fps": 30
}

### Check Processing Job Status (replace JOB_ID)
GET {{baseUrl}}/api/process/status/fca86618-4dd8-4441-8ed0-b9d27897d0a2
Authorization: Bearer {{token}}

### Get All User Jobs
GET {{baseUrl}}/api/process/jobs
Authorization: Bearer {{token}}

### Delete Video (replace VIDEO_ID)
DELETE {{baseUrl}}/api/videos/72bec0cc-8bc0-4934-9846-9c227b1ef588
Authorization: Bearer {{token}}